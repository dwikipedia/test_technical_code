@{
    Layout = "~/Views/Shared/_Layout.cshtml";

    ViewBag.Title = "Booking Page";
    var suggestions = ViewData["Suggestions"] as List<BookMeetingRoom.Web.Models.SuggestionViewModel>;
    var errorMessage = ViewData.ModelState[string.Empty];
    var warningMessage = ViewData["Message"];
}

@model BookMeetingRoom.Web.Models.BookViewModel

<div class="container">
    <div class="col-lg-12 mb-4">
        <h1>Book Meeting Room</h1>
    </div>

    @Html.Partial("_ErrorMessage", errorMessage)

    @using (Html.BeginForm("Book", "Book", FormMethod.Post, new { id = "bookingForm" }))
    {
        @Html.AntiForgeryToken()

        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Please fill the fields below</h5>
                <div class="form-group row mb-4">
                    @Html.LabelFor(m => m.Name, htmlAttributes: new { @class = "col-form-label col-sm-2 control-label required" })

                    <div class="col-sm-10">
                        @Html.TextBoxFor(m => m.Name, new { @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Name, "", new { @class = "text-danger" })

                    </div>
                </div>

                <div class="form-group row mb-4">
                    @Html.LabelFor(m => m.Time, htmlAttributes: new { @class = "col-form-label col-sm-2 control-label required" })
                    <div class="col-sm-10">
                        @Html.DropDownListFor(m => m.Time, Model.TimeOptions, new { @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Time, "", new { @class = "text-danger" })

                    </div>
                </div>

                <div class="form-group row mb-4">
                    @Html.LabelFor(m => m.Duration, htmlAttributes: new { @class = "col-form-label col-sm-2 control-label required" })

                    <div class="col-sm-10">
                        @Html.DropDownListFor(m => m.Duration, Model.DurationInMinutes, new { @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Duration, "", new { @class = "text-danger" })

                    </div>
                </div>

                <div class="form-group row mb-4">
                    @Html.LabelFor(m => m.NumOfPeople, htmlAttributes: new { @class = "col-form-label col-sm-2 control-label required" })

                    <div class="col-sm-10">
                        @Html.EditorFor(m => m.NumOfPeople, new { htmlAttributes = new { @class = "form-control", type = "number", min = "2", max = "10" } })
                        @Html.ValidationMessageFor(m => m.NumOfPeople, "", new { @class = "text-danger" })

                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="form-group mt-4">
                    <button type="submit" class="btn btn-outline-primary btn-lg">Book</button>
                </div>
            </div>
        </div>
    }

    @Html.Partial("_WarningMessage", warningMessage)
    @Html.Partial("_SuggestionTable", suggestions)
</div>
